<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Calculadora Crédito Hipotecario</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: auto;
    padding: 20px;
  }
  label, input {
    display: block;
    margin: 8px 0;
  }
  input, button {
    padding: 8px;
    width: 100%;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    background-color: #007BFF;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 16px;
  }
  button:hover {
    background-color: #0056b3;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 14px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: right;
  }
  th {
    background-color: #f2f2f2;
  }
  h2 {
    text-align: center;
  }
</style>
</head>
<body>
  <h2>Calculadora Crédito Hipotecario</h2>

  <label>Monto de la casa (USD):</label>
  <input type="number" id="montoCasa" placeholder="Ej: 100000" min="0" step="any" />

  <label>Cuota inicial (USD):</label>
  <input type="number" id="cuotaInicial" placeholder="Ej: 20000" min="0" step="any" />

  <label>Tiempo del crédito (años):</label>
  <input type="number" id="tiempo" placeholder="Ej: 20" min="1" step="1" />

  <label>TEA (Tasa Efectiva Anual %) :</label>
  <input type="number" id="tea" placeholder="Ej: 6.5" min="0" step="any" />

  <label>Tasa referencial anual (%) :</label>
  <input type="number" id="tasaRef" placeholder="Ej: 2" min="0" step="any" />

  <button onclick="calcularHipotecario()">Calcular</button>

  <div id="resultado"></div>

  <script>
    function calcularHipotecario() {
      const montoCasa = parseFloat(document.getElementById('montoCasa').value);
      const cuotaInicial = parseFloat(document.getElementById('cuotaInicial').value);
      const tiempoAnios = parseInt(document.getElementById('tiempo').value);
      const tea = parseFloat(document.getElementById('tea').value) / 100;
      const tasaRef = parseFloat(document.getElementById('tasaRef').value) / 100;

      if (isNaN(montoCasa) || isNaN(cuotaInicial) || isNaN(tiempoAnios) || isNaN(tea) || isNaN(tasaRef) ||
          montoCasa <= 0 || cuotaInicial < 0 || cuotaInicial >= montoCasa || tiempoAnios <= 0 || tea < 0 || tasaRef < 0) {
        alert("Por favor ingresa todos los datos correctamente.");
        return;
      }

      // Monto financiado
      const montoFinanciado = montoCasa - cuotaInicial;

      // Convertir TEA a tasa mensual efectiva
      const tasaMensual = Math.pow(1 + tea, 1/12) - 1;

      // Número de cuotas en meses
      const cuotas = tiempoAnios * 12;

      // Calcular cuota mensual con fórmula amortización francesa
      // cuota = P * i / (1 - (1 + i)^-n)
      const cuotaMensual = montoFinanciado * tasaMensual / (1 - Math.pow(1 + tasaMensual, -cuotas));

      // Total pagado
      const totalPagado = cuotaMensual * cuotas;

      // Intereses totales pagados
      const interesesTotales = totalPagado - montoFinanciado;

      // Mostrar resumen
      let html = `
        <h3>Resumen del crédito</h3>
        <p><b>Monto financiado:</b> $${montoFinanciado.toFixed(2)}</p>
        <p><b>Cuota mensual:</b> $${cuotaMensual.toFixed(2)}</p>
        <p><b>Total pagado (capital + intereses):</b> $${totalPagado.toFixed(2)}</p>
        <p><b>Intereses totales:</b> $${interesesTotales.toFixed(2)}</p>
        <p><b>Tasa referencial anual:</b> ${(tasaRef*100).toFixed(2)}%</p>
        <h3>Detalle de amortización mensual</h3>
        <table>
          <thead>
            <tr>
              <th>Mes</th>
              <th>Cuota</th>
              <th>Intereses</th>
              <th>Capital amortizado</th>
              <th>Saldo</th>
            </tr>
          </thead>
          <tbody>
      `;

      let saldo = montoFinanciado;
      for(let mes=1; mes<=cuotas; mes++) {
        const interesesMes = saldo * tasaMensual;
        const capitalAmortizado = cuotaMensual - interesesMes;
        saldo -= capitalAmortizado;

        html += `<tr>
          <td>${mes}</td>
          <td>$${cuotaMensual.toFixed(2)}</td>
          <td>$${interesesMes.toFixed(2)}</td>
          <td>$${capitalAmortizado.toFixed(2)}</td>
          <td>$${saldo > 0 ? saldo.toFixed(2) : "0.00"}</td>
        </tr>`;
      }

      html += `
          </tbody>
        </table>
      `;

      document.getElementById('resultado').innerHTML = html;
    }
  </script>
</body>
</html>


       
